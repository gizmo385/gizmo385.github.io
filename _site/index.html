<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Christopher Chapline</title>
	
	<meta name="author" content="Christopher Chapline">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/gizmo385">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:cachapline8@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/?s=35" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://www.gravatar.com/avatar/?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	Computer Science student at the University of Arizona
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/gizmo385">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:cachapline8@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Christopher Chapline </h1>
</div>



<article class="home">

  <span class="post-date">
    
    August
    11th,
    
    2015
  </span>

  <h2>
    <a href="/clojure/programming/2015/08/11/adts-in-clojure.html">Algebraic Data Types & Clojure</a>
  </h2>

  <div>
    
    <h3>What are Algebraic Data Types?</h3>

<p><a href="http://wikipedia.org/en/Algebraic_data_type">Algebraic data types</a> (ADTs) are a feature present
in many functional programming languages, such as
<a href="http://wikipedia.org/en/Haskell_(programming_language)">Haskell</a> and
<a href="http://wikipedia.org/en/Scala_(programming_language)">Scala</a>. ADTs allow you to define a type by
defining the different forms that type can take. For example, you could express a binary tree by
saying that it falls under one of 3 categories:</p>

<ol>
<li><p>An empty node.</p></li>
<li><p>A leaf node, containing only a value.</p></li>
<li><p>A tree node, containing 2 children (left and right).</p></li>
</ol>

<p>Definitions like these make it easy to create functions which operate on the ADT by specifying the
behavior that should be followed based on the different values that type can take. Before we define
our syntax, let&#39;s first examine how ADTs are used in other languages.</p>

<h3>ADTs in Haskell</h3>

<p>Haskell is generally the poster child for functional programming languages and as such I&#39;m going to
leverage it for these examples. It should be noted however that my Haskell skills are somewhat
limited so I will be basing this example off of code found on Wikipedia. Let&#39;s look at one way we
might define the above tree example using ADTs in Haskell:</p>
<div class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="kr">data</span> <span class="kt">Tree</span> <span class="n">a</span> <span class="ow">=</span> <span class="kt">Empty</span>
            <span class="o">|</span> <span class="kt">Leaf</span> <span class="n">a</span>
            <span class="o">|</span> <span class="kt">Node</span> <span class="kt">Tree</span> <span class="kt">Tree</span>
</code></pre></div>
<p>The above example is precisely why ADTs are incredibly handy - they read like plain English. It
becomes incredibly simple to understand the full range of possibilities for a type. It also makes it
incredibly intuitive to define operations based upon the different values your type might take. As
an example, I am going to use the definition of a function to calculate the depth of a tree as
described on Wikipedia:</p>
<div class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="nf">depth</span> <span class="ow">::</span> <span class="kt">Tree</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
<span class="nf">depth</span> <span class="kt">Empty</span> <span class="ow">=</span> <span class="mi">0</span>
<span class="nf">depth</span> <span class="p">(</span><span class="kt">Leaf</span> <span class="n">n</span><span class="p">)</span> <span class="ow">=</span> <span class="mi">1</span>
<span class="nf">depth</span> <span class="p">(</span><span class="kt">Node</span> <span class="n">l</span> <span class="n">r</span><span class="p">)</span> <span class="ow">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">max</span> <span class="p">(</span><span class="n">depth</span> <span class="n">l</span><span class="p">)</span> <span class="p">(</span><span class="n">depth</span> <span class="n">r</span><span class="p">)</span>
</code></pre></div>
<p>As you can see, functions operating on ADTs become incredibly brief and easily expressible. While
some of this is due to the conciseness of the language and how expressive it is, you&#39;ll see that
we&#39;ll soon be able to define something very similar in Clojure.</p>

<h3>So how do they look in Clojure?</h3>

<p>The syntax that this ADT implementation will use will look like this:</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">defadt</span> <span class="nv">Tree</span>
  <span class="p">(</span><span class="nf">Empty</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">Leaf</span> <span class="nv">value</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">Node</span> <span class="nb">left </span><span class="nv">right</span><span class="p">))</span>
</code></pre></div>
<p>This syntax is incredibly similar to the Haskell code. We will also see that we can define the depth
function described above like so:</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmulti </span><span class="nv">depth</span> <span class="nv">adt-type</span><span class="p">)</span>
<span class="p">(</span><span class="kd">defmethod </span><span class="nv">depth</span> <span class="nv">Empty</span> <span class="p">[</span><span class="nv">_</span><span class="p">]</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="kd">defmethod </span><span class="nv">depth</span> <span class="nv">Leaf</span> <span class="p">[</span><span class="nv">_</span><span class="p">]</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="kd">defmethod </span><span class="nv">depth</span> <span class="nv">Node</span> <span class="p">[</span><span class="nv">node</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="p">(</span><span class="nb">max </span><span class="p">(</span><span class="nf">depth</span> <span class="p">(</span><span class="nb">node </span><span class="ss">:left</span><span class="p">))</span> <span class="p">(</span><span class="nf">depth</span> <span class="p">(</span><span class="nb">node </span><span class="ss">:right</span><span class="p">)))))</span>
<span class="p">(</span><span class="kd">defmethod </span><span class="nv">depth</span> <span class="ss">:default</span> <span class="p">[</span><span class="nv">_</span><span class="p">]</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>Once again, like the example above, it becomes extremely easy to read this function and to
understand what it is doing.</p>

<h3>Implementation</h3>

<p>Alright, enough talk. Let&#39;s get down to the brass tacks and actually implement this. The actual
types will be represented as maps with the proper metadata attached to them. We will then define
functions that allow for us to easily interact with our types. First, let&#39;s define our
<code>defadt</code> macro:</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmacro </span><span class="nv">defadt</span> <span class="p">[</span><span class="nv">adt-name</span> <span class="o">&amp;</span> <span class="nv">constructors</span><span class="p">]</span>
  <span class="o">`</span><span class="p">(</span><span class="nf">do</span>
     <span class="c1">; Define our test function</span>
     <span class="p">(</span><span class="kd">defn </span><span class="o">~</span><span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">adt-name</span> <span class="s">&quot;?&quot;</span><span class="p">))</span> <span class="p">[</span><span class="o">~</span><span class="ss">&#39;obj</span><span class="p">]</span>
       <span class="p">(</span><span class="nb">= </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">adt-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">adt-name</span> <span class="o">~</span><span class="ss">&#39;obj</span><span class="p">)))</span>
     <span class="c1">; Create our type constructors</span>
     <span class="o">~@</span><span class="p">(</span><span class="nb">for </span><span class="p">[[</span><span class="nv">type-name</span> <span class="o">&amp;</span> <span class="nv">fields</span><span class="p">]</span> <span class="nv">constructors</span><span class="p">]</span>
         <span class="p">(</span><span class="nb">apply </span><span class="p">(</span><span class="nb">partial </span><span class="nv">emit-constructor</span> <span class="nv">adt-name</span> <span class="nv">type-name</span><span class="p">)</span>
                 <span class="nv">fields</span><span class="p">))))</span>
</code></pre></div>
<p>This macro does two things:</p>

<ol>
<li><p>It defines a test function which will check if a given object is a part of the defined ADT. So
 for the tree ADT defined above, a function <code>Tree?</code> would be generated by this macro.</p></li>
<li><p>Creates the constructor for each case of the ADT. In the case of the tree ADT, 3 functions
 would be defined: <code>Empty</code>, <code>Leaf</code>, and <code>Node</code>.</p></li>
</ol>

<p>There are a couple problems with this macro however - most notably is that it isn&#39;t complete. It
references 2 functions, <code>adt-name</code> and <code>emit-constructor</code>, which we have yet to implement. Let&#39;s
examine the <code>emit-constructor</code> function as that does a fair amount of the heavy lifting:</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn- </span><span class="nv">emit-constructor</span> <span class="p">[</span><span class="nv">adt-name</span> <span class="nv">type-name</span> <span class="o">&amp;</span> <span class="nv">fields</span><span class="p">]</span>
  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">type-name#</span> <span class="p">(</span><span class="nb">symbol </span><span class="nv">type-name</span><span class="p">)</span>
        <span class="nv">metadata</span> <span class="p">{</span><span class="ss">:adt</span> <span class="p">(</span><span class="nb">str </span><span class="nv">adt-name</span><span class="p">)</span> <span class="ss">:adt-type</span> <span class="nv">type-name#</span><span class="p">}]</span>
    <span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nf">empty?</span> <span class="nv">fields</span><span class="p">)</span>
      <span class="c1">; Can&#39;t create an empty struct, so create map instead</span>
      <span class="o">`</span><span class="p">(</span><span class="kd">defn </span><span class="o">~</span><span class="nv">type-name#</span> <span class="p">[]</span> <span class="p">(</span><span class="nb">with-meta </span><span class="p">{}</span> <span class="o">~</span><span class="nv">metadata</span><span class="p">))</span>

      <span class="c1">; Define a struct to collect arguments into</span>
      <span class="o">`</span><span class="p">(</span><span class="kd">defn </span><span class="o">~</span><span class="nv">type-name#</span> <span class="p">[</span><span class="o">~@</span><span class="nv">fields</span><span class="p">]</span>
         <span class="p">(</span><span class="nf">with-meta</span>
           <span class="p">(</span><span class="nb">struct </span><span class="p">(</span><span class="nb">create-struct </span><span class="o">~@</span><span class="p">(</span><span class="nb">map keyword </span><span class="nv">fields</span><span class="p">))</span> <span class="o">~@</span><span class="nv">fields</span><span class="p">)</span>
           <span class="o">~</span><span class="nv">metadata</span><span class="p">)))))</span>
</code></pre></div>
<p>The first thing that this function does is ensure that the metadata and symbols are created. The
metadata for these types consists of 2 fields:</p>

<ol>
<li><p>The name of the adt that this value is constrained in.</p></li>
<li><p>The particular sub-type in the ADT that this is. This is assigned as the symbol for the
 type-name which allows us to dispatch based on symbols like Empty and Leaf.</p></li>
</ol>

<p>After that, it creates a function which will be used to instantiate new instances of these types.
A distinction is made between types which have arguments and those which do not. Empty types are
defined as empty maps with metadata whereas types with arguments are created as structs. Now that we
have actually created our ADT implementation, let&#39;s begin looking at the utility functions used by
this implementation, including <code>adt-name</code>.</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defn </span><span class="nv">adt-name</span>
  <span class="p">[</span><span class="nv">obj</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">obj</span> <span class="nb">meta </span><span class="ss">:adt</span><span class="p">))</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">adt-type</span>
  <span class="p">[</span><span class="nv">obj</span><span class="p">]</span>
  <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">obj</span> <span class="nb">meta </span><span class="ss">:adt-type</span><span class="p">))</span>
</code></pre></div>
<p>Both of these functions serve as metadata assessors for ADT sub-types and are helpful both for
extracting information and as dispatch functions for multimethods.</p>

<h3>Conclusion</h3>

<p>ADTs provide an interesting way of defining types in a system and allow for incredibly concise
function definitions. They&#39;re also just really fun to implement and provide an interesting example
of what is possible with macros using a relatively small amount of code. The code from this post is
available in my <a href="https://github.com/gizmo385/LearningClojure/">LearningClojure</a> repository
<a href="https://github.com/gizmo385/LearningClojure/blob/master/adt/src/adt/core.clj">here</a>.</p>

<p>As I noted in this post, my Haskell skills are particularly rusty, so if you find any syntax errors
in this post, feel free to submit a pull request or message me and I will be happy to fix them.</p>

<h3>Addendum</h3>

<p>While messing with the syntax over the past few days, I discovered that it is possible to get
slightly closer to mimicing the Haskell syntax for defining an ADT. Before explaining the change,
note that this is not meant to be practical! The implementation of this involves 2 steps:</p>

<ol>
<li><p>Expect a second mandatory positional argument, an equals sign.</p></li>
<li><p>Partition the variable positional arguments by the | symbol and then filter out the lists that
 only contain the vertical bar. This creates the right lists that will be emited as
 constructors. The macro definition is as follows:</p></li>
</ol>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="kd">defmacro </span><span class="nv">data</span>
  <span class="p">[</span><span class="nv">adt-name</span> <span class="nv">equals-sign</span> <span class="o">&amp;</span> <span class="nv">constructors</span><span class="p">]</span>
  <span class="o">`</span><span class="p">(</span><span class="nf">do</span>
     <span class="p">(</span><span class="kd">defn </span><span class="o">~</span><span class="p">(</span><span class="nb">symbol </span><span class="p">(</span><span class="nb">str </span><span class="nv">adt-name</span> <span class="s">&quot;?&quot;</span><span class="p">))</span> <span class="p">[</span><span class="o">~</span><span class="ss">&#39;obj</span><span class="p">]</span>
       <span class="p">(</span><span class="nb">= </span><span class="o">~</span><span class="p">(</span><span class="nb">str </span><span class="nv">adt-name</span><span class="p">)</span> <span class="p">(</span><span class="nf">adt-name</span> <span class="o">~</span><span class="ss">&#39;obj</span><span class="p">)))</span>
     <span class="o">~@</span><span class="p">(</span><span class="nb">for </span><span class="p">[[</span><span class="nv">type-name</span> <span class="o">&amp;</span> <span class="nv">fields</span><span class="p">]</span>
             <span class="p">(</span><span class="nb">filter </span><span class="p">(</span><span class="nb">partial not= </span><span class="o">&#39;</span><span class="p">(</span><span class="err">|</span><span class="p">))</span>
                     <span class="p">(</span><span class="nf">partition-by</span> <span class="p">(</span><span class="nb">partial = </span><span class="o">&#39;</span><span class="err">|</span><span class="p">)</span> <span class="nv">constructors</span><span class="p">))]</span>
         <span class="p">(</span><span class="nb">apply </span><span class="p">(</span><span class="nb">partial </span><span class="nv">emit-constructor</span> <span class="nv">adt-name</span> <span class="nv">type-name</span><span class="p">)</span>
                 <span class="nv">fields</span><span class="p">))))</span>
</code></pre></div>
<p>This allows you to define the tree from above like this:</p>
<div class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="p">(</span><span class="nf">data</span> <span class="nv">Tree</span> <span class="nb">= </span><span class="nv">Empty</span> <span class="err">|</span> <span class="nv">Leaf</span> <span class="nv">value</span> <span class="err">|</span> <span class="nv">Node</span> <span class="nb">left </span><span class="nv">right</span><span class="p">)</span>
</code></pre></div>
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    1st,
    
    2015
  </span>

  <h2>
    <a href="/general/talks/programming/2015/08/01/using-vim.html">Sticking with Vim</a>
  </h2>

  <div>
    
    <p>An overview of my Vim workflow and talking about why I keep coming back to the editor time after
time.</p>

<h3>Not <em>another</em> Vim post!</h3>

<p>Posts about the advantages and disadvantages of Vim as an editor for getting work done have been
featured on damn near every programmer blog in existence - seriously
<a href="http://www.viemu.com/a-why-vi-vim.html">they</a>
<a href="http://www.terminally-incoherent.com/blog/2012/03/21/why-vim/">are</a>
<a href="https://www.reddit.com/r/ProgrammerHumor/comments/338tx5/vim/cqiyma2">freaking</a>
<a href="https://pascalprecht.github.io/2014/03/18/why-i-use-vim/">everywhere</a>. All of these posts do
a great job of introducing the concept of modal editing and discussing why you, as a developer,
should take the time to learn how to use Vim (even if its only the basics). However, I want to spend
this blog post talking about how I use Vim and how Vim helps me get my job done.</p>

<h3>Plugin managers are seriously the best</h3>

<p>One of the most common issues that I see beginners having when they first start using Vim is
figuring out how to sift through the mountain of plugins and find the truly standout ones.
Furthermore, once I find one of these diamonds in the rough, how can I ensure that my version of
the plugin is kept up to date without having to manually keep track of each individual plugin that
you&#39;ve installed? The answer, as both the title of this section suggests and those who have
worked in Vim for a reasonable amount of time will know, is a plugin manager. Generally speaking,
there are three popular plugin managers that get all the attention:
<a href="https://github.com/tpope/vim-pathogen">Pathogen</a>,
<a href="https://github.com/Shougo/neobundle.vim">Neobundle</a>, and
<a href="https://github.com/VundleVim/Vundle.vim">Vundle</a>. While I personally prefer Vundle out of the
bunch, each does its job incredibly well and doesn&#39;t stand in the way of your workflow or interrupt
you for updates when you don&#39;t want it to.</p>

<p>Regardless of which plugin manager you decide to go with, the inclusion of one into your vim
workflow will make your life much easier.</p>

<h3>Keybindings that just make sense</h3>

<p>I am a huge fan of most of the default bindings in vim. For the majority of the actions that I find
myself doing while editing, the default bindings are always nearby and are never a strain to reach
or remember in the moment. However, there are a few non-default bindings that I would argument make
life much easier:</p>

<ul>
<li><p>Exit insert mode with <code>jj</code> by mapping it to <code>&lt;ESC&gt;</code></p></li>
<li><p>Change your leader to something like <code>,</code> or <code>&lt;Space&gt;</code></p></li>
<li><p>Mapping <code>;</code> to <code>:</code> in normal mode to make commands easier</p></li>
<li><p>Drop your arrow keys by mapping them to <code>&lt;nop&gt;</code></p></li>
</ul>

<p>These are just a couple of the bindings
<a href="https://github.com/gizmo385/dotfiles/blob/master/dotfiles/.vim_bindings.vim">that I use</a> and that
I feel make my development lifecycle move much faster.</p>

<h3>Lightweight plugins for everything</h3>

<p>People are usually nervous to stick with Vim because it isn&#39;t as fully-featured as many
mainstream IDEs out of the box. But many of the features that you yearn for in an IDE are easily
replaced by lightweight Vim plugins that port the features but don&#39;t sacrifice on one of vim&#39;s
greatest advantages - its speed! Here are a couple of examples:</p>

<ul>
<li><p>Want a file browser? Try out <a href="https://github.com/scrooloose/nerdtree">Nerdtree</a> or
<a href="https://github.com/Shougo/unite.vim">Unite</a> will do the job.</p></li>
<li><p>Fuzzy file finder?
<a href="https://github.com/kien/ctrlp.vim">Ctrl-P</a> has got ya covered!</p></li>
<li><p>Editing LISP code? Try <a href="https://github.com/vim-scripts/paredit.vim">Paredit</a> and
<a href="https://github.com/kien/rainbow_parentheses.vim">Rainbow Parenthesis</a>.</p></li>
</ul>

<p>Alongside these more common editor features, I have a few plugins that I frequently use that I
don&#39;t often see featured in more commonplace development environments, such as
<a href="https://github.com/tpope/vim-fugitive">actually decent git integration</a> or automatic building
<a href="https://github.com/shime/vim-livedown">markdown previews</a>. Even if the plugin that your heart
truly desires isn&#39;t available, there is nothing holding you back from writing one yourself! I&#39;ve
spent the past few days working on a plugin to
<a href="https://github.com/gizmo385/spotify.vim">control Spotify from vim</a>, allowing me to play and
control my music without <a href="http://i.imgur.com/Ssz6pjF.png">breaking my concentration</a> while vim
isn&#39;t necessary known for its stellar scripting language, most plugins can be handled by doing the
heavy lifting in a langauge like Ruby or Python.</p>

<p>A vast suite of plugins coupled with the fact that the installation is no more difficult than
a .vimrc entry leads to what is probably my favorite reason to use vim...</p>

<h3>Quick and easy configuration deployment</h3>

<p>It is generally safe to assume that any system that you use will include a Vim installation. This
makes incredibly easy to package up your Vim configuration and transfer it quickly and easily to
a new machine in a moments notice. It makes transitioning to a new system or SSHing into a new
machine a much less painful experience because the development environment that you have come to
know can come along with you an make it like it you never left your home machine. In
<a href="https://github.com/gizmo385/dotfiles">my dotfiles</a>, I have a
<a href="https://github.com/gizmo385/dotfiles/blob/master/update_dotfiles">shell script</a> that I use that
automatically downloads and copies over my dotfiles for vim, bash, and zsh. This is quite possibly
one of the my most treasured utilities as a developer. Being able to detach myself from any single
development machine affords me freedom as a developer that I don&#39;t think you could easily replicate
in an IDE.</p>

<h3>Wrapping up</h3>

<p>Overall, Vim provides me with a development experience that I don&#39;t think is easily replicated
by other editors (Emacs being an exception to this rule). It provides me with mobility as a deveoper
that frees me from any particular machine to do my work and allows me to quickly and freely explore
different plugin environments and workflows without having to worry about resetting my configuration
and figuring it all out again.</p>

<p>I would recommend that any developer who is tired of digging through settings dialogs trying to find
that perfect configuration for that single editor for that single language platform give Vim (or
Emacs) a shot.</p>

    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    March
    6th,
    
    2015
  </span>

  <h2>
    <a href="/2015/03/06/LISP-A-More-Elegant-Weapon.html">Lisp A More Elegant Weapon</a>
  </h2>

  <div>
    
    
    <p>I recently gave <a href="http://uofa-acm.github.io/2015/01/29/why-is-lisp-different/">a talk</a> to my <a href="http://uofa-acm.github.io">university&#39;s ACM chapter</a> talking about what makes LISP different and why those differences are powerful. In the coming weeks, I will work on putting together a more long-form blog post that will work as an extension to my talk.</p>

<p>The slides for this talk are available <a href="http://slides.com/gizmo385/the-land-of-lisp#/">here</a>.</p>

    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    November
    2nd,
    
    2014
  </span>

  <h2>
    <a href="/java/programming/c/2014/11/02/Hello-World-in-Java.html">Hello World in Java</a>
  </h2>

  <div>
    
    <p>The hello world program is something that every developer is familiar with, and for some, it was their first foray into computer programming. Well, I want to return to ground zero and dive head-first into the rabbit hole to explain what that deceptively simple HelloWorld.java program is actually doing behind the scenes. To do this, we will be looking at the implementation of various features of the JVM, the JDK, and the Java Stadard Library. The source code for many of the classes present in the 1.8 version of the standard library is viewable at <a href="http://grepcode.com/">grepcode</a>.</p>

<p>To begin our journey, let&#39;s look at the source code for a bare bones hello world implementation in Java:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">);</span> <span class="c1">// Simple, right?</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The first place to look would appear to be the <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/System.html">System</a> class in the Java API. In the source code for System.java, we will find that <code>System.out</code> is declared like so:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div>
<p>Wait a minute! What do you mean <code>System.out</code> is null? If <code>System.out</code> is null, how could I possibly call <code>println</code> without having Java fall apart and spit out the ever-so-helpful NullPointerException? Well hold your horses and let&#39;s have a look. The System class is one of the first classes that is loaded by the JVM when it starts program execution, and when it is initialized the <code>initializeSystemClass</code> method is called. This method does many important things, including setting up System.out. The lines that properly initializes it are:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">FileOutputStream</span> <span class="n">fdOut</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="n">FileDescriptor</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>
<span class="n">setOut0</span><span class="o">(</span><span class="n">newPrintStream</span><span class="o">(</span><span class="n">fdOut</span><span class="o">,</span>
    <span class="n">props</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;sun.stdout.encoding&quot;</span><span class="o">)));</span>
</code></pre></div>
<p>The first thing that you might notice is that we&#39;re opening up a <a href="http://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html">FileOutputStream</a>. Why? Well, we&#39;re opening a FileOutputStream on a <a href="http://docs.oracle.com/javase/8/docs/api/java/io/FileDescriptor.html">FileDescriptor</a>. Because stdout is not handled in the same way on all platforms, Java created the FileDescriptor class, whose sole responsibility is to handle setting up the input and output file handles. After setting up a FileOutputStream for stdout, the <code>setOut0</code> method is called, which has the following signature:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">setOut0</span><span class="o">(</span><span class="n">PrintStream</span> <span class="n">out</span><span class="o">);</span>
</code></pre></div>
<p>This is a Java native method, which means that its implementation is backed by native code defined using the JNI (Java Native Interface). As you delve deeper and deeper into the Java standard library, you will come to discover that many of the base operations in the language ultimately fall down to native methods. This is especially true for file IO and operations that involve system calls. The standard template for a native method that will be executing C code looks something like this:</p>
<div class="highlight"><pre><code class="language-C" data-lang="C"><span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span> <span class="nf">Java_ClassName_MethodName</span>
  <span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">obj</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*</span>
<span class="cm">     * The env pointer, at its most basic, is a reference to the JVM,</span>
<span class="cm">     * which allows it to perform actions that are necessary for</span>
<span class="cm">     * Java/C interop.</span>
<span class="cm">     *</span>
<span class="cm">     * The obj argument refers to the current class that this method</span>
<span class="cm">     * is being executed in.</span>
<span class="cm">     */</span>

    <span class="cm">/* Do some fancy C stuff here */</span>
<span class="p">}</span>
</code></pre></div>
<p>This native method in particular is defined in <a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/lang/System.c#l437">System.c</a> and sets the static <code>out</code> variable within the System class to be the FileOutputStream that was created.</p>
<div class="highlight"><pre><code class="language-C" data-lang="C"><span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span>
<span class="nf">Java_java_lang_System_setOut0</span><span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jclass</span> <span class="n">cla</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">stream</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">jfieldID</span> <span class="n">fid</span> <span class="o">=</span>
        <span class="p">(</span><span class="o">*</span><span class="n">env</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GetStaticFieldID</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="n">cla</span><span class="p">,</span><span class="s">&quot;out&quot;</span><span class="p">,</span>
            <span class="s">&quot;Ljava/io/PrintStream;&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span><span class="n">env</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">SetStaticObjectField</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="n">cla</span><span class="p">,</span><span class="n">fid</span><span class="p">,</span><span class="n">stream</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>So, this is all well and good, but what actually happens when we call println? Well, when we&#39;re calling System.out.println, we&#39;re actually calling the println function defined in <a href="http://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html">PrintStream</a>, so let&#39;s have a look at that:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">println</span><span class="o">(</span><span class="n">String</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">print</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">newLine</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;null&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">write</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<p>For now, we&#39;ll ignore the call to the newline function, and focus instead on the print function. Aside from calling write, the only interesting thing that the write function does is perform a null check and replace your string with the default &quot;null&quot; text. Since print doesn&#39;t really seem to be supplying us with any answers, let&#39;s take a look at write:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ensureOpen</span><span class="o">();</span>
            <span class="n">textOut</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
            <span class="n">textOut</span><span class="o">.</span><span class="na">flushBuffer</span><span class="o">();</span>
            <span class="n">charOut</span><span class="o">.</span><span class="na">flushBuffer</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">autoFlush</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;\n&#39;</span><span class="o">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">))</span>
                <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedIOException</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">interrupt</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">trouble</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The next steps in this seemingly endless stream of operations involves a call to the write method, which eventually results in a call to an abstract write method as declared in the abstract <a href="http://docs.oracle.com/javase/8/docs/api/java/io/Writer.html">Writer</a> class and implemented, in our case, in <a href="http://docs.oracle.com/javase/8/docs/api/java/io/BufferedWriter.html">BufferedWriter</a>.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">lock</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ensureOpen</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">off</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">off</span> <span class="o">&gt;</span> <span class="n">cbuf</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">len</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">||</span>
            <span class="o">((</span><span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">cbuf</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">||</span> <span class="o">((</span><span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfBoundsException</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">len</span> <span class="o">&gt;=</span> <span class="n">nChars</span><span class="o">)</span> <span class="o">{</span>
            <span class="cm">/* If the request length exceeds the size of the output</span>
<span class="cm">               buffer, flush the buffer and then write the data</span>
<span class="cm">               directly. In this way buffered streams will cascade</span>
<span class="cm">               harmlessly. */</span>
            <span class="n">flushBuffer</span><span class="o">();</span>
            <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">off</span><span class="o">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="o">(</span><span class="n">nChars</span> <span class="o">-</span> <span class="n">nextChar</span><span class="o">,</span> <span class="n">t</span> <span class="o">-</span> <span class="n">b</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">cb</span><span class="o">,</span> <span class="n">nextChar</span><span class="o">,</span> <span class="n">d</span><span class="o">);</span>
            <span class="n">b</span> <span class="o">+=</span> <span class="n">d</span><span class="o">;</span>
            <span class="n">nextChar</span> <span class="o">+=</span> <span class="n">d</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nextChar</span> <span class="o">&gt;=</span> <span class="n">nChars</span><span class="o">)</span>
                <span class="n">flushBuffer</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>As if the number of hoops that we&#39;ve jumped through hadn&#39;t quite hit critical mass, we can see that the write function in BufferedWriter calls the write function on <em>another</em> stream, which in this case is an <a href="http://docs.oracle.com/javase/8/docs/api/java/io/OutputStreamWriter.html">OutputStreamWriter</a>:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">se</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<p><em>sigh</em></p>

<p>As you can see, the write function in OutputStreamWriter calls yet another write function. This one happens to be the write function located in StreamEncoder, which is a lower level Java class located in the sun.nio.cs package. Outside of doing some bounds checking on the char array that gets passed to it, the actual meat of the operation is delegated to implWrite method which, after copying the characters into a buffer, calls the writeBytes method:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">writeBytes</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">bb</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">lim</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="na">limit</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="na">position</span><span class="o">();</span>
    <span class="k">assert</span> <span class="o">(</span><span class="n">pos</span> <span class="o">&lt;=</span> <span class="n">lim</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rem</span> <span class="o">=</span> <span class="o">(</span><span class="n">pos</span> <span class="o">&lt;=</span> <span class="n">lim</span> <span class="o">?</span> <span class="n">lim</span> <span class="o">-</span> <span class="n">pos</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">rem</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">ch</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bb</span><span class="o">)</span> <span class="o">!=</span> <span class="n">rem</span><span class="o">)</span>
            <span class="k">assert</span> <span class="kc">false</span> <span class="o">:</span> <span class="n">rem</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bb</span><span class="o">.</span><span class="na">array</span><span class="o">(),</span> <span class="n">bb</span><span class="o">.</span><span class="na">arrayOffset</span><span class="o">()</span> <span class="o">+</span> <span class="n">pos</span><span class="o">,</span> <span class="n">rem</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">bb</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p>There are two possible exit points for this method that we will be focusing on. The first calls the write function on a <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/channels/WritableByteChannel.html">WritableByteStream</a> whereas the second calls the write function on a FileOutputStream and passes it an array of bytes. However, we will be ignoring the first because at the time of writing this blog post, it is a disabled feature in the StreamEncoder as shown below:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This path disabled until direct buffers are faster</span>
<span class="k">if</span> <span class="o">(</span><span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="n">out</span> <span class="k">instanceof</span> <span class="n">FileOutputStream</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="o">((</span><span class="n">FileOutputStream</span><span class="o">)</span><span class="n">out</span><span class="o">).</span><span class="na">getChannel</span><span class="o">();</span>
</code></pre></div>
<p>The secondary exit point eventually results in a call to writeBytes in the FileOutputStream class.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">writeBytes</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">,</span>
    <span class="kt">boolean</span> <span class="n">append</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</code></pre></div>
<p>Holy native methods Batman! Beyond this point, the implementations differ based on the operating system that the JVM is running on - meaning that this is our exit. We shall leave continuing down the rabbit hole beyond this as an exercise to the reader.</p>

<p>In summary:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">);</span>
</code></pre></div>
<p>is vastly more complicated under the hood than it first appears to be.</p>

    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    September
    2nd,
    
    2014
  </span>

  <h2>
    <a href="/programming/databases/2014/09/02/practical-orms.html">ORMs in Practical Applications</a>
  </h2>

  <div>
    
    <p>I would first of all like to apologize for the lack of posts over the past few months. During the summer, I have been partaking in my first internship at a software development company in Tucson, <a href="http://elegantthought.com/">Elegant Thought</a>.</p>

<p>During this internship, I worked on a proprietary Android app and as a part of the development process worked on an <a href="http://en.wikipedia.org/wiki/Object-relational_mapping">Object-Relational Mapper</a>.</p>

<h3>Object-Relational Mapping</h3>

<p>The purpose of an object-relational mapper (ORM) is to provide a layer of abstraction that will allow for java objects to be mapped to objects that can be placed in a database. This abstraction layer comes with many pros and cons that must be taken into account when deciding whether or not an ORM is a viable solution to a problem.</p>

<h3>The Advantages of an ORM:</h3>

<h4>Simplicity:</h4>

<p>Incorporating an ORM into your application abstracts away all of the nitty-gritty database design and allows your code to flow seemlessly across your application. By abstracting away the database-design aspect of your application, you can create a uniform experience across your codebase, which means that those working on your application don&#39;t necessarily have to understand <a href="http://en.wikipedia.org/wiki/SQL">SQL</a> or <a href="http://en.wikipedia.org/wiki/Cypher_Query_Language">Cypher</a> or whatever proprietary database query language may be used in your application.</p>

<p>In addition to abstracting the database the design aspects of your application, including an ORM in your application also allows for your database to be as modular as your application requires it to be. As long as you operate within the bounds of your ORM, you can easily change the backing data schema for your database without having to make heavy overhauls to your application. If you instead opted to use an in-line query language, changing your data schema might require recreating a wide array of individual database queries to recreate previous behavior.</p>

<h4>Cleaner Code:</h4>

<p>SQL is ugly. Plain and simple. While it is generally a rather simple query language, it is also quite ugly when it is plastered in the middle of a Python script. ORMs solve this problem. Because an ORM abstracts away all of the messy database interactions and performs it all behind the scenes, inline database queries quickly become a thing of the past. They especially make complex queries vastly easier by automatically performing the necessary table joins behind the scenes rather than having it baked into the query.</p>

<h4>Automatic Query Optimization:</h4>

<p>One of the most complicated elements of designing the ORM this summer was ensuring that the SQL that was generated by our library was as efficient as we could reasonably make it. For example, if you are a performing a query that spans several different relationships, some of which join extremely large tables, then immediately joining all of those tables is going to create extremely large performance problems within your application. To solve this problem, we wrote our query generation so that the tables would be filtered as the query grew. This prevented large tables, potentially containing hundreds or thousands of columns, from being joined on other large tables which might also contain hundreds or thousands of columns. This allows for complex relationship chains to be traversed without crippling the runtime performance of your application.</p>

<p>While an ORM might never be able to completely optimize a particular query, being able to automatically optimize the vast majority of queries is a huge boon when designing an application.</p>

<h3>The Disadvantages of an ORM:</h3>

<h4>Design Inflation:</h4>

<p>Dependency management is a necessary evil. Automatic build systems have made this necessary evil a lot easier to stomach and manage, but the necessary evil still exists. When you&#39;re designing a large application, running into build system problems is just a part of the job. Whether it&#39;s about getting different dependencies to play nicely together or getting your development platform to cooperate, you&#39;re bound to run into problems somewhere down the line. Replacing your databases with an ORM is just adding another dependency onto what may already be a large stack of dependencies, all depending on their own individual array of projects and applications to properly function.</p>

<p>The addition of another dependency also bloats application size. When you ship your application, now you must also ship this large and bloated ORM to go along with it. For some, this simply isn&#39;t worth the other possible disadvantages that come along with including an ORM in your application.</p>

<h4>Inability to Optimize:</h4>

<p>For homebrewed databases, sometimes there are optimizations that can be made that aren&#39;t necessarily apparent to those who do not have experience with the application. These sorts of optimizations, grown from personal experience, familiarity with a project, and the blood, sweat, and tears of those desigining the application are optimizations that simply can&#39;t be made by an ORM. An ORM lacks the necessary knowledge of its problem space to make an informated decision about whether or not a query can be further optimized. This is a purely human ability that isn&#39;t something that is easily replacable and can be seen as a large detriment to someone working on the project</p>

<h3>Conclusion:</h3>

<p>ORMs can be a fantastic piece of software that can save a developer a large amount of time over inline query languages, however the benefits are not infinite and the disadvantages are numerous. There are many who believe that Object/Relational problem does not have a convinient solution and that there is no best solution that might work best for all developers. Some even go as far to say that ORMs are the <a href="http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx">Vietnam of Computer Science</a>, wasting the time of developers everywhere with their own unique quirks and quagmires that developers may spend countless hours wading through attempting to figure out where the bottlenecks in their code are.</p>

<p>When deciding whether or not an ORM is best for your application, it is important to consider the advantages and disadvantages that come along with it. It is also paramount that a developer realizes that an ORM is not going to solve all of the problems that crop up when designing a database schema that accurately reflects their problem space.</p>

    
  </div>

</article>

<hr/>

<ul class="pager"> 

  
  <li class="previous disabled">
    <a>&larr; Newer</a>
  </li>
  
  
  <li>
    <span class="page_number">Page: 1 of 2</span>
  </li>

  
  <li class="next">
    <a href="/page2">Older &rarr;</a>
  </li>
  

</ul>




		<footer>
			<hr/>
			<p>
				&copy; 2015 Christopher Chapline with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



