<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Hello World in Java</title>
	
	<meta name="description" content="How Hello World actually works">
	
	<meta name="author" content="Christopher Chapline">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/gizmo385">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:cachapline8@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="http://www.gravatar.com/avatar/?s=35" class="img-circle" />
				
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://www.gravatar.com/avatar/?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header>


<div id="bio" class="text-center">
	Computer Science student at the University of Arizona
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/gizmo385">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:cachapline8@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Hello World in Java </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   November 
	   2nd,
	     
	   2014
	 </span>
	  <div class="article_body">
	  <p>The hello world program is something that every developer is familiar with, and for some, it was their first foray into computer programming. Well, I want to return to ground zero and dive head-first into the rabbit hole to explain what that deceptively simple HelloWorld.java program is actually doing behind the scenes. To do this, we will be looking at the implementation of various features of the JVM, the JDK, and the Java Stadard Library. The source code for many of the classes present in the 1.8 version of the standard library is viewable at <a href="http://grepcode.com/">grepcode</a>.</p>

<p>To begin our journey, let&#39;s look at the source code for a bare bones hello world implementation in Java:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorld</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span> <span class="n">String</span><span class="o">[]</span> <span class="n">args</span> <span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">);</span> <span class="c1">// Simple, right?</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The first place to look would appear to be the <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/System.html">System</a> class in the Java API. In the source code for System.java, we will find that <code>System.out</code> is declared like so:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div>
<p>Wait a minute! What do you mean <code>System.out</code> is null? If <code>System.out</code> is null, how could I possibly call <code>println</code> without having Java fall apart and spit out the ever-so-helpful NullPointerException? Well hold your horses and let&#39;s have a look. The System class is one of the first classes that is loaded by the JVM when it starts program execution, and when it is initialized the <code>initializeSystemClass</code> method is called. This method does many important things, including setting up System.out. The lines that properly initializes it are:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">FileOutputStream</span> <span class="n">fdOut</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="n">FileDescriptor</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>
<span class="n">setOut0</span><span class="o">(</span><span class="n">newPrintStream</span><span class="o">(</span><span class="n">fdOut</span><span class="o">,</span>
    <span class="n">props</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&quot;sun.stdout.encoding&quot;</span><span class="o">)));</span>
</code></pre></div>
<p>The first thing that you might notice is that we&#39;re opening up a <a href="http://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html">FileOutputStream</a>. Why? Well, we&#39;re opening a FileOutputStream on a <a href="http://docs.oracle.com/javase/8/docs/api/java/io/FileDescriptor.html">FileDescriptor</a>. Because stdout is not handled in the same way on all platforms, Java created the FileDescriptor class, whose sole responsibility is to handle setting up the input and output file handles. After setting up a FileOutputStream for stdout, the <code>setOut0</code> method is called, which has the following signature:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">setOut0</span><span class="o">(</span><span class="n">PrintStream</span> <span class="n">out</span><span class="o">);</span>
</code></pre></div>
<p>This is a Java native method, which means that its implementation is backed by native code defined using the JNI (Java Native Interface). As you delve deeper and deeper into the Java standard library, you will come to discover that many of the base operations in the language ultimately fall down to native methods. This is especially true for file IO and operations that involve system calls. The standard template for a native method that will be executing C code looks something like this:</p>
<div class="highlight"><pre><code class="language-C" data-lang="C"><span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span> <span class="nf">Java_ClassName_MethodName</span>
  <span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">obj</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/*</span>
<span class="cm">     * The env pointer, at its most basic, is a reference to the JVM,</span>
<span class="cm">     * which allows it to perform actions that are necessary for</span>
<span class="cm">     * Java/C interop.</span>
<span class="cm">     *</span>
<span class="cm">     * The obj argument refers to the current class that this method</span>
<span class="cm">     * is being executed in.</span>
<span class="cm">     */</span>

    <span class="cm">/* Do some fancy C stuff here */</span>
<span class="p">}</span>
</code></pre></div>
<p>This native method in particular is defined in <a href="http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/native/java/lang/System.c#l437">System.c</a> and sets the static <code>out</code> variable within the System class to be the FileOutputStream that was created.</p>
<div class="highlight"><pre><code class="language-C" data-lang="C"><span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span>
<span class="nf">Java_java_lang_System_setOut0</span><span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jclass</span> <span class="n">cla</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">stream</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">jfieldID</span> <span class="n">fid</span> <span class="o">=</span>
        <span class="p">(</span><span class="o">*</span><span class="n">env</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GetStaticFieldID</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="n">cla</span><span class="p">,</span><span class="s">&quot;out&quot;</span><span class="p">,</span>
            <span class="s">&quot;Ljava/io/PrintStream;&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">(</span><span class="o">*</span><span class="n">env</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">SetStaticObjectField</span><span class="p">(</span><span class="n">env</span><span class="p">,</span><span class="n">cla</span><span class="p">,</span><span class="n">fid</span><span class="p">,</span><span class="n">stream</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>So, this is all well and good, but what actually happens when we call println? Well, when we&#39;re calling System.out.println, we&#39;re actually calling the println function defined in <a href="http://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html">PrintStream</a>, so let&#39;s have a look at that:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">println</span><span class="o">(</span><span class="n">String</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">print</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="n">newLine</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">s</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;null&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">write</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<p>For now, we&#39;ll ignore the call to the newline function, and focus instead on the print function. Aside from calling write, the only interesting thing that the write function does is perform a null check and replace your string with the default &quot;null&quot; text. Since print doesn&#39;t really seem to be supplying us with any answers, let&#39;s take a look at write:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">ensureOpen</span><span class="o">();</span>
            <span class="n">textOut</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
            <span class="n">textOut</span><span class="o">.</span><span class="na">flushBuffer</span><span class="o">();</span>
            <span class="n">charOut</span><span class="o">.</span><span class="na">flushBuffer</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">autoFlush</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">&#39;\n&#39;</span><span class="o">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">))</span>
                <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedIOException</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">interrupt</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">trouble</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>The next steps in this seemingly endless stream of operations involves a call to the write method, which eventually results in a call to an abstract write method as declared in the abstract <a href="http://docs.oracle.com/javase/8/docs/api/java/io/Writer.html">Writer</a> class and implemented, in our case, in <a href="http://docs.oracle.com/javase/8/docs/api/java/io/BufferedWriter.html">BufferedWriter</a>.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="kd">synchronized</span> <span class="o">(</span><span class="n">lock</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">ensureOpen</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">((</span><span class="n">off</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">off</span> <span class="o">&gt;</span> <span class="n">cbuf</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="n">len</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">||</span>
            <span class="o">((</span><span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">)</span> <span class="o">&gt;</span> <span class="n">cbuf</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">||</span> <span class="o">((</span><span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nf">IndexOutOfBoundsException</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">len</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">len</span> <span class="o">&gt;=</span> <span class="n">nChars</span><span class="o">)</span> <span class="o">{</span>
            <span class="cm">/* If the request length exceeds the size of the output</span>
<span class="cm">               buffer, flush the buffer and then write the data</span>
<span class="cm">               directly. In this way buffered streams will cascade</span>
<span class="cm">               harmlessly. */</span>
            <span class="n">flushBuffer</span><span class="o">();</span>
            <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">off</span><span class="o">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">;</span>
        <span class="k">while</span> <span class="o">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="n">min</span><span class="o">(</span><span class="n">nChars</span> <span class="o">-</span> <span class="n">nextChar</span><span class="o">,</span> <span class="n">t</span> <span class="o">-</span> <span class="n">b</span><span class="o">);</span>
            <span class="n">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">cb</span><span class="o">,</span> <span class="n">nextChar</span><span class="o">,</span> <span class="n">d</span><span class="o">);</span>
            <span class="n">b</span> <span class="o">+=</span> <span class="n">d</span><span class="o">;</span>
            <span class="n">nextChar</span> <span class="o">+=</span> <span class="n">d</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">nextChar</span> <span class="o">&gt;=</span> <span class="n">nChars</span><span class="o">)</span>
                <span class="n">flushBuffer</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>As if the number of hoops that we&#39;ve jumped through hadn&#39;t quite hit critical mass, we can see that the write function in BufferedWriter calls the write function on <em>another</em> stream, which in this case is an <a href="http://docs.oracle.com/javase/8/docs/api/java/io/OutputStreamWriter.html">OutputStreamWriter</a>:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span> <span class="n">cbuf</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">se</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div>
<p><em>sigh</em></p>

<p>As you can see, the write function in OutputStreamWriter calls yet another write function. This one happens to be the write function located in StreamEncoder, which is a lower level Java class located in the sun.nio.cs package. Outside of doing some bounds checking on the char array that gets passed to it, the actual meat of the operation is delegated to implWrite method which, after copying the characters into a buffer, calls the writeBytes method:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kt">void</span> <span class="nf">writeBytes</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">bb</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">lim</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="na">limit</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">bb</span><span class="o">.</span><span class="na">position</span><span class="o">();</span>
    <span class="k">assert</span> <span class="o">(</span><span class="n">pos</span> <span class="o">&lt;=</span> <span class="n">lim</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">rem</span> <span class="o">=</span> <span class="o">(</span><span class="n">pos</span> <span class="o">&lt;=</span> <span class="n">lim</span> <span class="o">?</span> <span class="n">lim</span> <span class="o">-</span> <span class="n">pos</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">rem</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">ch</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">ch</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bb</span><span class="o">)</span> <span class="o">!=</span> <span class="n">rem</span><span class="o">)</span>
            <span class="k">assert</span> <span class="kc">false</span> <span class="o">:</span> <span class="n">rem</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bb</span><span class="o">.</span><span class="na">array</span><span class="o">(),</span> <span class="n">bb</span><span class="o">.</span><span class="na">arrayOffset</span><span class="o">()</span> <span class="o">+</span> <span class="n">pos</span><span class="o">,</span> <span class="n">rem</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">bb</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p>There are two possible exit points for this method that we will be focusing on. The first calls the write function on a <a href="http://docs.oracle.com/javase/8/docs/api/java/nio/channels/WritableByteChannel.html">WritableByteStream</a> whereas the second calls the write function on a FileOutputStream and passes it an array of bytes. However, we will be ignoring the first because at the time of writing this blog post, it is a disabled feature in the StreamEncoder as shown below:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// This path disabled until direct buffers are faster</span>
<span class="k">if</span> <span class="o">(</span><span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="n">out</span> <span class="k">instanceof</span> <span class="n">FileOutputStream</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="o">((</span><span class="n">FileOutputStream</span><span class="o">)</span><span class="n">out</span><span class="o">).</span><span class="na">getChannel</span><span class="o">();</span>
</code></pre></div>
<p>The secondary exit point eventually results in a call to writeBytes in the FileOutputStream class.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">writeBytes</span><span class="o">(</span><span class="kt">byte</span> <span class="n">b</span><span class="o">[],</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">,</span>
    <span class="kt">boolean</span> <span class="n">append</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
</code></pre></div>
<p>Holy native methods Batman! Beyond this point, the implementations differ based on the operating system that the JVM is running on - meaning that this is our exit. We shall leave continuing down the rabbit hole beyond this as an exercise to the reader.</p>

<p>In summary:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Hello World&quot;</span><span class="o">);</span>
</code></pre></div>
<p>is vastly more complicated under the hood than it first appears to be.</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#java-ref">
					java <span>(2)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#programming-ref">
					programming <span>(5)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#c-ref">
					c <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#hello world-ref">
					hello world <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#java-ref">
					java <span>(2)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Hello World in Java"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="http://www.gravatar.com/avatar/" class="img-rounded author-image" />
        <h4 class="section-title author-name">Christopher Chapline</h4>
        <p class="author-bio">Computer Science student at the University of Arizona</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/programming/databases/2014/09/02/practical-orms.html" title="ORMs in Practical Applications">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/2015/03/06/LISP-A-More-Elegant-Weapon.html" title="Lisp A More Elegant Weapon">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>



    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'cachapline8';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>





		<footer>
			<hr/>
			<p>
				&copy; 2015 Christopher Chapline with Jekyll. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



